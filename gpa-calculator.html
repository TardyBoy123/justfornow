<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UWO GPA Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <button class="btn" id="home-btn" onclick="location.href='index.html'">Home</button>
    </header>
    <h1>UWO GPA Calculator</h1>
    <p>Enter the courses, grades, and weights to calculate your GPA.</p>
    
    <table>
        <tr>
            <th>Course</th>
            <th>Grade (%)</th>
            <th>Weight (0.5 or 1.0)</th>
        </tr>
        <tr id="courseRow">
            <td><input type="text" placeholder="Course"></td>
            <td><input type="number" placeholder="Grade (%)"></td>
            <td>
                <select>
                    <option value="1.0">1.0</option>
                    <option value="0.5">0.5</option>
                </select>
            </td>
        </tr>
    </table>
    
    <button class="btn action-btn" id="addRow">Add row</button>
    <button class="btn action-btn" id="computeGPA">Compute GPA</button>

    <div id="audio-controls">
        <audio controls autoplay loop>
            <source src="Imogen Heap - Just For Now (Official Audio).mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <p>Now playing - Imogen Heap - Just For Now</p>
    </div>

    <script>
        document.getElementById('addRow').addEventListener('click', function () {
            const table = document.querySelector('table');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="Course"></td>
                <td><input type="number" placeholder="Grade (%)"></td>
                <td>
                    <select>
                        <option value="1.0">1.0</option>
                        <option value="0.5">0.5</option>
                    </select>
                </td>
            `;
            table.appendChild(newRow);
        });

        document.getElementById('computeGPA').addEventListener('click', function () {
            const rows = document.querySelectorAll('table tr:not(:first-child)');
            let totalGPA = 0;
            let totalCourses = 0;

            rows.forEach(row => {
                const grade = row.cells[1].querySelector('input').value;
                const weight = row.cells[2].querySelector('select').value;

                let gpamark;
                if (grade >= 90) {
                    gpamark = 4;
                } else if (grade >= 85) {
                    gpamark = 3.9;
                } else if (grade >= 80) {
                    gpamark = 3.7;
                } else if (grade >= 77) {
                    gpamark = 3.3;
                } else if (grade >= 73) {
                    gpamark = 3;
                } else if (grade >= 70) {
                    gpamark = 2.7;
                } else if (grade >= 67) {
                    gpamark = 2.3;
                } else if (grade >= 63) {
                    gpamark = 2;
                } else if (grade >= 60) {
                    gpamark = 1.7;
                } else if (grade >= 57) {
                    gpamark = 1.3;
                } else if (grade >= 53) {
                    gpamark = 1;
                } else if (grade >= 50) {
                    gpamark = 0.7;
                } else {
                    gpamark = 0;
                }

                totalGPA += gpamark * weight;
                totalCourses += parseFloat(weight);
            });

            const cGPA = (totalGPA / totalCourses).toFixed(2);
            alert(`Your GPA is: ${cGPA}`);
        });
    </script>
</body>
</html>
